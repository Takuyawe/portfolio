---
import '../styles/global.css'
import { Icon } from 'astro-icon/components'
import animationData from '../../public/animated-icons/dev.json'
import AnimationIconComponent from '../components/AnimationIconComponent'

interface Props {
  title: string
}

const { title } = Astro.props
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Astro description" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
  </head>

  <body id="body" class="bg-gray-900 overflow-y-scroll md:overflow-hidden pl-20 pr-20 md:pl-40 md:pr-20">
    <!-- on top of the globe -->
    <div
      id="layout-move-to-home"
      class="z-10 fixed top-5 left-4 h-18 cursor-pointer text-white hover:text-gray-200 text-3xl md:text-4xl flex item-center justify-center gap-x-2"
    >
      <AnimationIconComponent client:only="react" animationData={animationData} className="size-20 md:size-24" />
      <div class="self-center">WEB DEV</div>
    </div>
    <div
      class="transition ease-in-out delay-50 hover:bg-gray-100 rounded-md fixed top-10 right-12 h-12 w-32 md:h-16 md:w-40 outline outline-1 outline-gray-100 flex items-center justify-center"
    >
      <button id="layout-move-to-contact" class="text-xl md:text-2xl text-gray-100 hover:text-gray-800 transition ease-in-out delay-50"
        >Contact</button
      >
    </div>
    <div class="z-10 fixed bottom-6 left-4 md:bottom-12 md:left-12 bg-white hover:bg-gray-200 opacity-75 rounded-full cursor-pointer">
      <a href="https://github.com/Takuyawe" target="_blank">
        <Icon class="size-16 md:size-20" name="github" />
      </a>
    </div>
    <slot />
  </body>
</html>

<script>
  import { currentPageId } from '../stores/pageId'
  import { getViewSectionId } from '../modules'
  import { PAGE_ID } from '../consts'

  document.getElementById('layout-move-to-home')?.addEventListener('click', (e) => {
    e.preventDefault()
    currentPageId.set(PAGE_ID.HOME)
    const sectionId = getViewSectionId(PAGE_ID.HOME)
    document.getElementById(sectionId)?.scrollIntoView({ behavior: 'smooth' })
  })

  document.getElementById('layout-move-to-contact')?.addEventListener('click', (e) => {
    e.preventDefault()
    currentPageId.set(PAGE_ID.CONTACT)
    const sectionId = getViewSectionId(PAGE_ID.CONTACT)
    document.getElementById(sectionId)?.scrollIntoView({ behavior: 'smooth' })
  })
</script>
